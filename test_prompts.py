#!/usr/bin/env python3\n\"\"\"\nTest script for thesis prompt templates\n\"\"\"\n\nimport sys\nimport os\nfrom pathlib import Path\n\n# Add project root to path\nproject_root = Path(__file__).parent.parent.parent\nsys.path.insert(0, str(project_root))\n\nfrom src.share_insights_v1.utils.prompt_loader import ThesisPromptLoader\n\ndef test_prompt_loading():\n    \"\"\"Test loading all prompt templates\"\"\"\n    print(\"üß™ Testing Prompt Loading...\")\n    \n    loader = ThesisPromptLoader()\n    \n    # Test loading each prompt type\n    prompt_types = loader.list_available_prompts()\n    print(f\"Available prompts: {prompt_types}\")\n    \n    for prompt_type in prompt_types:\n        try:\n            prompt = loader.load_prompt(prompt_type)\n            print(f\"‚úÖ {prompt_type}: {len(prompt)} characters\")\n        except Exception as e:\n            print(f\"‚ùå {prompt_type}: {str(e)}\")\n    \n    print()\n\ndef test_prompt_formatting():\n    \"\"\"Test formatting prompts with sample data\"\"\"\n    print(\"üß™ Testing Prompt Formatting...\")\n    \n    loader = ThesisPromptLoader()\n    \n    # Sample data\n    sample_data = {\n        'ticker': 'AAPL',\n        'company_type': 'Large Cap Technology',\n        'target_price': 185.50,\n        'current_price_str': '$175.25',\n        'market_cap': 2800000000000,\n        'pe_ratio': 28.5,\n        'revenue_growth': 0.08,\n        'strengths': 'Strong brand, Innovation',\n        'risks': 'Competition, Regulation'\n    }\n    \n    # Test formatting each prompt type\n    for prompt_type in ['bull_case', 'bear_case', 'objective']:\n        try:\n            formatted_prompt = loader.format_prompt(prompt_type, **sample_data)\n            word_count = len(formatted_prompt.split())\n            print(f\"‚úÖ {prompt_type}: {word_count:,} words formatted successfully\")\n        except Exception as e:\n            print(f\"‚ùå {prompt_type}: {str(e)}\")\n    \n    print()\n\ndef test_prompt_info():\n    \"\"\"Test getting prompt information\"\"\"\n    print(\"üß™ Testing Prompt Info...\")\n    \n    loader = ThesisPromptLoader()\n    \n    for prompt_type in loader.list_available_prompts():\n        info = loader.get_prompt_info(prompt_type)\n        if info:\n            print(f\"‚úÖ {prompt_type}: {info['file_size']} bytes, exists: {info['exists']}\")\n        else:\n            print(f\"‚ùå {prompt_type}: No info available\")\n    \n    print()\n\ndef test_missing_variables():\n    \"\"\"Test handling of missing template variables\"\"\"\n    print(\"üß™ Testing Missing Variables Handling...\")\n    \n    loader = ThesisPromptLoader()\n    \n    # Test with minimal data (should use defaults)\n    minimal_data = {\n        'ticker': 'TEST',\n        'target_price': 100.0\n    }\n    \n    try:\n        formatted_prompt = loader.format_prompt('objective', **minimal_data)\n        print(f\"‚úÖ Minimal data formatting: {len(formatted_prompt.split())} words\")\n    except Exception as e:\n        print(f\"‚ùå Minimal data formatting failed: {str(e)}\")\n    \n    print()\n\ndef main():\n    \"\"\"Run all tests\"\"\"\n    print(\"üöÄ Starting Thesis Prompt Template Tests\\n\")\n    \n    test_prompt_loading()\n    test_prompt_formatting()\n    test_prompt_info()\n    test_missing_variables()\n    \n    print(\"‚ú® All tests completed!\")\n\nif __name__ == \"__main__\":\n    main()